<header class="app-header">
  <mat-toolbar color="primary" class="header-toolbar">
    <div class="brand-section">
      <span class="brand-title">TaxiService</span>
    </div>

    <!-- Navigation Links -->
    <nav class="nav-section">
      <!-- Common links for all authenticated users -->
      <a mat-button routerLink="/rides" routerLinkActive="active-link" class="nav-link">
        <mat-icon>local_taxi</mat-icon>
        <span>Rides</span>
      </a>

      <!-- Driver-specific links -->
      <ng-container class="breadcrumbs" *ngIf="isDriver$ | async">
        <a mat-button routerLink="/shifts" routerLinkActive="active-link" class="nav-link breadcrumb-item">
          <mat-icon>access_time</mat-icon>
          <span>Shifts</span>
        </a>

<!--        <a mat-button routerLink="/companies" routerLinkActive="active-link" class="nav-link breadcrumb-item">-->
<!--          <mat-icon>business</mat-icon>-->
<!--          <span>Companies</span>-->
<!--        </a>-->
      </ng-container>

      <!-- Personal Account link -->
      <a mat-button routerLink="/profile" routerLinkActive="active-link" class="nav-link">
        <mat-icon class="profile-icon">account_circle</mat-icon>
        <span>Account</span>
      </a>
    </nav>

    <!-- Spacer -->
    <span class="header-spacer"></span>

    <!-- User Section -->
    <div class="user-section">
      <!-- Greeting -->
      <span class="user-greeting" *ngIf="user$ | async as user">
        {{ getGreeting(user) }}
      </span>

      <!-- User Menu -->
      <button mat-icon-button [matMenuTriggerFor]="userMenu" class="user-menu-trigger">
        <mat-icon>account_circle</mat-icon>
      </button>

      <mat-menu #userMenu="matMenu" class="user-menu">
        <div class="user-menu-header" *ngIf="user$ | async as user">
          <div class="user-avatar">
            <mat-icon>account_circle</mat-icon>
          </div>
          <div class="user-info">
            <div class="user-name">{{ user.name }} {{ user.surname }}</div>
            <div class="user-email">{{ user.email }}</div>
            <div class="user-role">{{ user.role | titlecase }}</div>
          </div>
        </div>

        <mat-divider></mat-divider>

        <button mat-menu-item routerLink="/profile">
          <mat-icon>person</mat-icon>
          <span>Profile Settings</span>
        </button>

        <button mat-menu-item (click)="onLogout()">
          <mat-icon>logout</mat-icon>
          <span>Sign Out</span>
        </button>
      </mat-menu>
    </div>
  </mat-toolbar>
</header>
